# Bitcoin Core v29.0 RC Testing Reports


- Release Notes for v29.0 [here](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/29.0-Release-Notes-Draft)
- Testing guide for v29.0 RC [here](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/29.0-Release-Candidate-Testing-Guide)

## Removed support for UPnP to NAT-PMP
The support for UPnP(miniupnpc lib) was removed in PR [#31130](https://github.com/bitcoin/bitcoin/pull/31130), I also did a Review Club on that which can be viewed here (https://github.com/Bitshala/BitcoinCore-PR-Review-Club/discussions/90).

### Testing the NAT-PMP auto-forwarding policy:
Checking out to rc2 tag,
```
git checkout v29.0rc2
cmake -B build
cmake --build build -j 4

./build/src/bitcoind -natpmp
```
It was successful on my router and below is the startup logs:
```
2025-03-25T07:41:33Z Config file arg: chain="main"
2025-03-25T07:41:33Z Config file arg: prune="1000"
2025-03-25T07:41:33Z Command-line arg: natpmp=""
2025-03-25T07:41:33Z Using at most 125 automatic connections (1024 file descriptors available)
2025-03-25T07:41:33Z scheduler thread start
2025-03-25T07:41:33Z Binding RPC on address ::1 port 8332
2025-03-25T07:41:33Z Binding RPC on address 127.0.0.1 port 8332
```

When executing bitcoind with `-upnp` option:
```
./build/src/bitcoind -upnp
``` 
I got a warning message as expected:
```
Warning: Option '-upnp' is set but UPnP support was dropped in version 29.0. Consider using '-natpmp' instead.
```

### Testing the PCP changes and IPv6 pinholing:
It was not successful on my home router
```
2025-03-25T08:09:03Z [net] trying v2 connection dummySeed.invalid. lastseen=0.0hrs
2025-03-25T08:09:04Z [net] pcp: Timeout
2025-03-25T08:09:04Z [net] pcp: Retrying (1)
2025-03-25T08:09:05Z [net] pcp: Timeout
2025-03-25T08:09:05Z [net] pcp: Retrying (2)
2025-03-25T08:09:06Z [net] pcp: Timeout
2025-03-25T08:09:06Z [net] pcp: Giving up after 3 tries
2025-03-25T08:09:06Z [net] portmap: gateway [IPv6]: fe80:d::aada:cff:fe99:38ae%13
2025-03-25T08:09:06Z [net] pcp: Requesting port mapping for addr 2405:201:800e:59f5:18af:3125:a136:c143 port 18444 from gateway fe80:d::aada:cff:fe99:38ae%13
2025-03-25T08:09:06Z [net] pcp: Internal address after connect: 2405:201:800e:59f5:18af:3125:a136:c143
2025-03-25T08:09:07Z [net] pcp: Timeout
2025-03-25T08:09:07Z [net] pcp: Retrying (1)
2025-03-25T08:09:08Z [net] pcp: Timeout
2025-03-25T08:09:08Z [net] pcp: Retrying (2)
2025-03-25T08:09:09Z [net] pcp: Timeout
2025-03-25T08:09:09Z [net] pcp: Giving up after 3 tries
2025-03-25T08:09:09Z [net] pcp: Requesting port mapping for addr 2405:201:800e:59f5:8047:6437:ec3f:6a22 port 18444 from gateway fe80:d::aada:cff:fe99:38ae%13
2025-03-25T08:09:09Z [net] pcp: Internal address after connect: 2405:201:800e:59f5:8047:6437:ec3f:6a22
2025-03-25T08:09:10Z [net] pcp: Timeout
2025-03-25T08:09:10Z [net] pcp: Retrying (1)
2025-03-25T08:09:11Z [net] pcp: Timeout
2025-03-25T08:09:11Z [net] pcp: Retrying (2)
2025-03-25T08:09:12Z [net] pcp: Timeout
2025-03-25T08:09:12Z [net] pcp: Giving up after 3 tries
```

Successfull PCP request would show like this:

```
 [net] portmap: gateway [IPv4]: 192.168.0.1
 [net] pcp: Requesting port mapping for addr 0.0.0.0 port 8333 from gateway 192.168.0.1
 [net] pcp: Internal address after connect: 192.168.0.150
 [net] pcp: Received response of 8 bytes: (scrubbed)
 [net] portmap: Got unsupported PCP version response, falling back to NAT-PMP
 [net] natpmp: Requesting port mapping port 8333 from gateway 192.168.0.1
 [net] natpmp: Received response of 12 bytes: (scrubbed)
 [net] natpmp: Received response of 16 bytes: (scrubbed)
 [net:info] portmap: Added mapping natpmp:(scrubbed) -> 192.168.0.150:8333 (for 2400s)
 [net] portmap: gateway [IPv6]: (scrubbed)
 [net] pcp: Requesting port mapping for addr (scrubbed) port 8333 from gateway (scrubbed)
 [net] pcp: Internal address after connect: (scrubbed)
```














